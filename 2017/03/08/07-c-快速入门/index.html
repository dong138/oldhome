<!DOCTYPE html>
          <head>
        <meta charset="utf-8">
            
            <title>
                c++快速入门-类和对象 | Howdoit
            </title>
            <meta content="width=device-width, initial-scale=1" name="viewport">
            <meta name="theme-color" content="#4184f3">
            
            
            <link href="/favicon.ico" rel="icon"/>
            

            <link rel="stylesheet" href="/css/highlight.light.css">
            <link rel="stylesheet" href="/css/prism-customize.css">
            <link rel="stylesheet" href="/css/nav-icon.css">
            <link rel="stylesheet" href="/css/waves.min.css">
            <link rel="stylesheet" href="/css/jquery.tocify.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/nav-indicator.css">
            </meta>
        </meta>
    </head>

    <body>
        <header>
            <!-- cover image or sth. -->
        </header>
        <div id="main" class="m-scene">
            
<div class="nav-wrapper">

    <div class="container">
        <nav>
            <div class="logo wave">
                <a href="/" id="logo">
                    Howdoit
                </a>
            </div>
            <div class="nav-toggle-icon" >
                <div class="material-hamburger">
                    <span>
                    </span>
                    <span>
                    </span>
                    <span>
                    </span>
                </div>
            </div>
            <div class="menu-wrapper">
                <div class="nav-indicator">
                </div>
                <ul class="menus">
                    
                     
                        <li>
                            <a class="wave " href="/categories/Python">
                                Python
                            </a>
                        </li>
                     
                        <li>
                            <a class="wave " href="/categories/cpp">
                                cpp
                            </a>
                        </li>
                     
                    
                   
                </ul>
            </div>
        </nav>
    </div>
</div>
            <div class="container content">
                <div class="scene_element scene_element--fadein">
                    <div class="row">
    <div class="main">
        <article>
          
          <header class="post-header">
          
          </header>
          <h1 class="post-title">c++快速入门-类和对象</h1>

          <section class="post-info">
            <span class="post-date">2017/03/08</span>
            
            <span class="post-category">
                <a class="article-category-link" href="/categories/cpp/">cpp</a>
            </span>
            
            
          </section>

          <section class="post-content">
            <h2 id="0-在线运行程序"><a href="#0-在线运行程序" class="headerlink" title="0. 在线运行程序"></a>0. 在线运行程序</h2><p>参考网址:<a href="http://codepad.org" target="_blank" rel="external">http://codepad.org</a></p>
<h2 id="1-什么是类"><a href="#1-什么是类" class="headerlink" title="1. 什么是类"></a>1. 什么是类</h2><p>什么是类呢？其实很简单，我们可以理解为一种用户自定义的数据类型，类似于C语言里面的结构体（struct）</p>
<h2 id="2-定义简单的类"><a href="#2-定义简单的类" class="headerlink" title="2. 定义简单的类"></a>2. 定义简单的类</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> student</div><div class="line">&#123;</div><div class="line">    <span class="comment">//可以在此处声明类成员变量和成员函数</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>创建了一个student类，可以在该类中声明student类的成员变量和成员函数，用于描述student的各方面特性，例如姓名、学号、年龄等信息。</p>
<p>特别要注意的一点是，在类声明结束处右括号“}”后面右一个分号“;”，这个分号一定不能忘记，它是类声明的一部分</p>
<h2 id="3-定义对象"><a href="#3-定义对象" class="headerlink" title="3. 定义对象"></a>3. 定义对象</h2><p>声明了student数据类型之后，我们就可以用其定义变量了，如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">student LiLei;  <span class="comment">//创建对象</span></div></pre></td></tr></table></figure>
<p>在这一条语句中就利用student数据类型声明了一个LiLei的变量，这和</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> a;  <span class="comment">//定义整形变量</span></div></pre></td></tr></table></figure>
<p>语句定义了一个整型变量表达的意思是类似的。而LiLei这个变量我们称之为student类的对象</p>
<h2 id="4-定义对象的另类方式"><a href="#4-定义对象的另类方式" class="headerlink" title="4. 定义对象的另类方式"></a>4. 定义对象的另类方式</h2><p>class关键字可要可不要：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> student LiLei; <span class="comment">//正确</span></div><div class="line">student LiLei;     <span class="comment">//同样正确</span></div></pre></td></tr></table></figure>
<h2 id="5-定义指针"><a href="#5-定义指针" class="headerlink" title="5. 定义指针"></a>5. 定义指针</h2><p>定义对象数组或指针：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//定义了一个all_student数组，该数据拥有1000个元素，每一个元素都是student类型(即可以存储student创建的对象)</span></div><div class="line">student all_student[<span class="number">1000</span>];</div><div class="line"></div><div class="line"><span class="comment">//定义了一个student类型的指针pointer，该指针可以指向student类型的变量，其用法跟普通指针是一样的。</span></div><div class="line">student * pointer;</div></pre></td></tr></table></figure>
<h2 id="6-有多个成员变量、成员函数的类"><a href="#6-有多个成员变量、成员函数的类" class="headerlink" title="6. 有多个成员变量、成员函数的类"></a>6. 有多个成员变量、成员函数的类</h2><p>类是一种数据类型，该类型类似于普通的数据类型，但是又有别于普通的数据类型。类这种数据类型是一个包含成员变量和成员函数的一个集合。下面是student类的定义。</p>
<p>类可以包含成员变量和成员函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> student</div><div class="line">&#123;</div><div class="line">    <span class="comment">// 成员变量</span></div><div class="line">    <span class="keyword">char</span> name[<span class="number">20</span>];  <span class="comment">//姓名</span></div><div class="line">    <span class="keyword">int</span> id_num;     <span class="comment">//学号</span></div><div class="line">    <span class="keyword">int</span> age;        <span class="comment">//年龄</span></div><div class="line">    <span class="keyword">char</span> sex;       <span class="comment">//性别</span></div><div class="line"></div><div class="line">    <span class="comment">// 成员函数</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_age</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">get_age</span><span class="params">()</span></span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>在student类中声明了四个成员变量：name、id_num、age和sex。这四个成员变量用于描述student特性。除此之外我们还在类中定声明了两个函数，set_age函数和get_age函数，这两个函数是student类的成员函数，这两个函数只给出了声明，未给出定义</p>
<h3 id="有两种方法可以给出成员函数的定义："><a href="#有两种方法可以给出成员函数的定义：" class="headerlink" title="有两种方法可以给出成员函数的定义："></a>有两种方法可以给出成员函数的定义：</h3><ul>
<li>在类内部进行函数的声明和定义，此种方式我们成为inline，也即内联定义。inline是C++关键字，专门用于表示内联；</li>
<li>在类内进行函数声明，在类外部进行函数定义</li>
</ul>
<h3 id="在类内部进行函数的声明和定义："><a href="#在类内部进行函数的声明和定义：" class="headerlink" title="在类内部进行函数的声明和定义："></a>在类内部进行函数的声明和定义：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> student</div><div class="line">&#123;</div><div class="line">    <span class="keyword">char</span> name[<span class="number">20</span>];  <span class="comment">//姓名</span></div><div class="line">    <span class="keyword">int</span> id_num;     <span class="comment">//学号</span></div><div class="line">    <span class="keyword">int</span> age;        <span class="comment">//年龄</span></div><div class="line">    <span class="keyword">char</span> sex;       <span class="comment">//性别</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_age</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;</div><div class="line">        age = a;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">get_age</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> age;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>两个成员函数均是在类声明内部进行声明和定义的，因此这两个函数是inline类型的。</p>
<h3 id="内联函数"><a href="#内联函数" class="headerlink" title="内联函数"></a>内联函数</h3><p>内联函数可以通知编译器在编译阶段用成员函数set_age和get_age的函数体替换掉所有调用该函数的代码，这样替换后的代码将不会再出现对这个函数的调用的代码。通过直接的替换可以在一定程度上提高程序运行效率，通常只是用于一些简短函数</p>
<h3 id="类内部声明函数，在类外部定义函数"><a href="#类内部声明函数，在类外部定义函数" class="headerlink" title="类内部声明函数，在类外部定义函数"></a>类内部声明函数，在类外部定义函数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> student</div><div class="line">&#123;</div><div class="line">    <span class="keyword">char</span> name[<span class="number">20</span>];  <span class="comment">//姓名</span></div><div class="line">    <span class="keyword">int</span> id_num;     <span class="comment">//学号</span></div><div class="line">    <span class="keyword">int</span> age;        <span class="comment">//年龄</span></div><div class="line">    <span class="keyword">char</span> sex;       <span class="comment">//性别</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_age</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">get_age</span><span class="params">()</span><span class="keyword">const</span></span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">//在类外部定义set_age函数</span></div><div class="line"><span class="keyword">void</span> student::set_age(<span class="keyword">int</span> a)</div><div class="line">&#123;</div><div class="line">    age = a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//在类外部定义get_age函数</span></div><div class="line"><span class="keyword">int</span> student::get_age()<span class="keyword">const</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> age;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>本例中set_age函数和get_age函数在类声明内部仅有声明部分，而无定义部分，其函数体在类声明之外定义。本例中定义函数采用了域解析符 ::</p>
<h3 id="函数强制转换为内联函数"><a href="#函数强制转换为内联函数" class="headerlink" title="函数强制转换为内联函数"></a>函数强制转换为内联函数</h3><p>在类内声明函数，如果在函数声明时使用inline关键字</p>
<p>可以将类内声明类外定义的函数强制转换为内联函数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> student</div><div class="line">&#123;</div><div class="line">    <span class="keyword">char</span> name[<span class="number">20</span>];  <span class="comment">//姓名</span></div><div class="line">    <span class="keyword">int</span> id_num;     <span class="comment">//学号</span></div><div class="line">    <span class="keyword">int</span> age;        <span class="comment">//年龄</span></div><div class="line">    <span class="keyword">char</span> sex;       <span class="comment">//性别</span></div><div class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">set_age</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">get_age</span><span class="params">()</span></span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//在类外部定义set_age函数</span></div><div class="line"><span class="keyword">void</span> student::set_age(<span class="keyword">int</span> a)</div><div class="line">&#123;</div><div class="line">    age = a;</div><div class="line">&#125;</div><div class="line"><span class="comment">//在类外部定义get_age函数</span></div><div class="line"><span class="keyword">int</span> student::get_age()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> age;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="7-信息隐藏"><a href="#7-信息隐藏" class="headerlink" title="7. 信息隐藏"></a>7. 信息隐藏</h2><p>类中可以声明变量和函数，为了将类对象的内部实现与外部行为分离开来，C++语言为类提供了封装机制，与之相关的三个关键字分别是：<code>private</code>、<code>protected</code>和<code>public</code>，这三个关键字所代表的含义分别为私有、受保护和公用。三个关键字的作用就是限制类中声明的变量和函数在外部的访问权限。</p>
<p>C++的这一机制可以使得类对象的使用者只需要关心类是如何使用的，而不需要去关心类内部的实现问题</p>
<h3 id="访问权限需要分两部分说明：类内和类外。"><a href="#访问权限需要分两部分说明：类内和类外。" class="headerlink" title="访问权限需要分两部分说明：类内和类外。"></a>访问权限需要分两部分说明：<code>类内</code>和<code>类外</code>。</h3><ul>
<li>在类内部，无论成员变量或成员函数被声明为private、public或者protected属性，均是可以互相访问的，无访问权限限制。</li>
<li>在类外，通过对象无法访问private和protected属性的成员变量和成员函数，而仅可以访问public属性的成员变量和成员函数。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> book</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setprice</span><span class="params">(<span class="keyword">double</span> a)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">double</span> <span class="title">getprice</span><span class="params">()</span></span>;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">double</span> price;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">void</span> book::setprice(<span class="keyword">double</span> a)</div><div class="line">&#123;</div><div class="line">    price = a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">double</span> book::getprice()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> price;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    book Alice;</div><div class="line">    Alice.setprice(<span class="number">29.9</span>);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"The price of Alice is $"</span>&lt;&lt;Alice.getprice()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><ul>
<li><p>类中成员变量price被设置成了private属性，而两个成员函数则设置成了public属性。声明为private属性的成员变量或函数，在类外是不可访问的，而声明为public属性的成员变量或函数，在类外可以访问。</p>
</li>
<li><p>另外还有一个关键字protected，声明为protected属性的成员变量或成员函数，在类外也是不可以访问的，但是其派生类内部确实可以访问的，这在后面将会重新介绍，在此处，我们只需要知道protected在类外无法访问即可。</p>
</li>
</ul>
<h3 id="成员变量和成员函数无声明顺序要求："><a href="#成员变量和成员函数无声明顺序要求：" class="headerlink" title="成员变量和成员函数无声明顺序要求："></a>成员变量和成员函数无声明顺序要求：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> book</div><div class="line">&#123;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">double</span> price;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setprice</span><span class="params">(<span class="keyword">double</span> a)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">double</span> <span class="title">getprice</span><span class="params">()</span></span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="访问权限相同的成员也可以分开声明"><a href="#访问权限相同的成员也可以分开声明" class="headerlink" title="访问权限相同的成员也可以分开声明"></a>访问权限相同的成员也可以分开声明</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> book</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">double</span> <span class="title">getprice</span><span class="params">()</span></span>;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">double</span> price;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setprice</span><span class="params">(<span class="keyword">double</span> a)</span></span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="8-访问成员变量、方法"><a href="#8-访问成员变量、方法" class="headerlink" title="8. 访问成员变量、方法"></a>8. 访问成员变量、方法</h2><p>通过对象可以访问public属性的成员变量或成员函数。访问可以通过成员选择符“.”或指针操作符“-&gt;”来完成</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> book</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setprice</span><span class="params">(<span class="keyword">double</span> a)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">double</span> <span class="title">getprice</span><span class="params">()</span></span>;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">double</span> price;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">void</span> book::setprice(<span class="keyword">double</span> a)</div><div class="line">&#123;</div><div class="line">    price = a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">double</span> book::getprice()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> price;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">// 创建对象的一种方式</span></div><div class="line">    book Alice;</div><div class="line">    Alice.setprice(<span class="number">29.9</span>);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"The price of Alice is $"</span>&lt;&lt;Alice.getprice()&lt;&lt;<span class="built_in">endl</span>;   </div><div class="line">    </div><div class="line">    <span class="comment">// 创建对象的另外一种方式</span></div><div class="line">    book *Harry = <span class="keyword">new</span> book;</div><div class="line">    Harry-&gt;setprice(<span class="number">49.9</span>);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"The price of Harry is $"</span>&lt;&lt;Harry-&gt;getprice()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>需要注意的是无论是成员选择符“.”还是指针操作符“-&gt;”，在类外都只能访问类中定义的public属性的成员变量或成员函数。我们写出Alice.price = 29.9或者Harry-&gt;price = 49.9这样的语句，编译都是无法通过的，其原因就是类的信息隐藏机制</p>
<h2 id="9-class和struct"><a href="#9-class和struct" class="headerlink" title="9. class和struct"></a>9. class和struct</h2><p>C++语言继承了C语言的struct，并且加以扩充。</p>
<p>在C语言中struct是只能定义数据成员，而不能定义成员函数的。</p>
<p>而在C++中，struct类似于class，在其中既可以定义数据成员，又可以定义成员函数。</p>
<p>在C++中，struct与class基本是通用的，唯一不同的是如果使用class关键字，类中定义的成员变量或成员函数默认都是private属性的，而采用struct关键字，结构体中定义的成员变量或成员函数默认都是public属性的。</p>
<h2 id="10-构造函数"><a href="#10-构造函数" class="headerlink" title="10. 构造函数"></a>10. 构造函数</h2><p>构造函数的主要用途就是初始化对象的</p>
<h3 id="构造函数是类中一种特殊的成员函数，其特殊之处有三点："><a href="#构造函数是类中一种特殊的成员函数，其特殊之处有三点：" class="headerlink" title="构造函数是类中一种特殊的成员函数，其特殊之处有三点："></a>构造函数是类中一种特殊的成员函数，其特殊之处有三点：</h3><ul>
<li>构造函数的函数名必须与类名相同；</li>
<li>构造函数无返回值；</li>
<li>当我们创建类对象的时候构造函数会被自动调用，而无需我们主动调用。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> book</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="comment">// 这里是一个构造方法</span></div><div class="line">        book()&#123;&#125;</div><div class="line">        <span class="comment">// 这里也是一个构造方法</span></div><div class="line">        book(<span class="keyword">char</span>* a, <span class="keyword">double</span> p);</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setprice</span><span class="params">(<span class="keyword">double</span> a)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">double</span> <span class="title">getprice</span><span class="params">()</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">settitle</span><span class="params">(<span class="keyword">char</span>* a)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">char</span> * <span class="title">gettitle</span><span class="params">()</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">double</span> price;</div><div class="line">        <span class="keyword">char</span> * title;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">book::book(<span class="keyword">char</span>* a, <span class="keyword">double</span> p)</div><div class="line">&#123;</div><div class="line">    title = a;</div><div class="line">    price = p;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> book::display()</div><div class="line">&#123;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"The price of "</span>&lt;&lt;title&lt;&lt;<span class="string">" is $"</span>&lt;&lt;price&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> book::setprice(<span class="keyword">double</span> a)</div><div class="line">&#123;</div><div class="line">    price = a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">double</span> book::getprice()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> price;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> book::settitle(<span class="keyword">char</span>* a)</div><div class="line">&#123;</div><div class="line">    title = a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">char</span> * book::gettitle()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> title;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    book Alice;</div><div class="line">    Alice.settitle(<span class="string">"Alice in Wonderland"</span>);</div><div class="line">    Alice.setprice(<span class="number">29.9</span>);</div><div class="line">    Alice.display();</div><div class="line">    <span class="function">book <span class="title">Harry</span><span class="params">(<span class="string">"Harry Potter"</span>, <span class="number">49.9</span>)</span></span>;</div><div class="line">    Harry.display();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果在类中声明了任何一个构造函数，则系统不会自动生成默认构造函数。构造函数同样能够使用类中的成员变量。</p>
<p>构造函数的作用在本例中也可以很清楚的看出来。构造函数就是用于初始化对象的，并且负责处理对象创建时需要处理的其它事务，在创建对象时会被自动调用。</p>
<p>主函数中，先定义了一个Alice对象，该对象其实在创建的时候已经自动调用了默认的构造函数的。若我们在类定义的时候不定义默认构造函数，则book Alice;这一句创建对象的语句则会出现编译错误，因为我们创建了带参构造函数，故默认构造函数不会被自动创建，因此在用book Alice;语句创建对象的时候无相应的构造函数能够调用，因此会初始化对象出错。</p>
<p>当我们创建Harry对象时，其后还跟有一个括号，里面还有两个参数，这一句创建对象会自动调用book(char * a, double p)构造函数进行对象的初始化，初始化之后，Harry.price = 49.9，而Harry.title = “Harry Potter”，因此在调用Harry.display()函数的时候，能够打印出“The price of Harry Potter is $49.9”也是不足为奇的。</p>
<h2 id="11-参数初始化表"><a href="#11-参数初始化表" class="headerlink" title="11. 参数初始化表"></a>11. 参数初始化表</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> book</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        book()&#123;&#125;</div><div class="line">        book(<span class="keyword">char</span>* a, <span class="keyword">double</span> p);</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setprice</span><span class="params">(<span class="keyword">double</span> a)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">double</span> <span class="title">getprice</span><span class="params">()</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">settitle</span><span class="params">(<span class="keyword">char</span>* a)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">char</span> * <span class="title">gettitle</span><span class="params">()</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">double</span> price;</div><div class="line">        <span class="keyword">char</span> * title;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">book::book(<span class="keyword">char</span> *a, <span class="keyword">double</span> p):title(a),price(p)</div><div class="line">&#123;</div><div class="line">    ;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="不能在函数体内部初始化-const-变量"><a href="#不能在函数体内部初始化-const-变量" class="headerlink" title="不能在函数体内部初始化 const 变量"></a>不能在函数体内部初始化 const 变量</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Array</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        Array()</div><div class="line">        &#123;</div><div class="line">            length = <span class="number">0</span>; <span class="comment">//compile error</span></div><div class="line">            num = <span class="literal">NULL</span>;</div><div class="line">        &#125;;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">const</span> <span class="keyword">int</span> length;</div><div class="line">        <span class="keyword">int</span> * num;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="通过参数初始化表初始化-const-变量"><a href="#通过参数初始化表初始化-const-变量" class="headerlink" title="通过参数初始化表初始化 const 变量"></a>通过参数初始化表初始化 const 变量</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Array</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        Array(): length(<span class="number">0</span>)</div><div class="line">        &#123;</div><div class="line">            num = <span class="literal">NULL</span>;</div><div class="line">        &#125;;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">const</span> <span class="keyword">int</span> length;</div><div class="line">        <span class="keyword">int</span> * num;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="12-默认参数"><a href="#12-默认参数" class="headerlink" title="12. 默认参数"></a>12. 默认参数</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> book</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        book()&#123;&#125;</div><div class="line">        book(<span class="keyword">char</span>* a, <span class="keyword">double</span> p = <span class="number">5.0</span>);</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">double</span> price;</div><div class="line">        <span class="keyword">char</span> * title;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">book::book(<span class="keyword">char</span>* a, <span class="keyword">double</span> p)  <span class="comment">//在定义函数的时候可以不指定默认参数</span></div><div class="line">&#123;</div><div class="line">    title = a;</div><div class="line">    price = p;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> book::display()</div><div class="line">&#123;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"The price of "</span>&lt;&lt;title&lt;&lt;<span class="string">" is $"</span>&lt;&lt;price&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function">book <span class="title">Harry</span><span class="params">(<span class="string">"Harry Potter"</span>, <span class="number">49.9</span>)</span></span>;</div><div class="line">    Harry.display();</div><div class="line">    <span class="function">book <span class="title">Gone</span><span class="params">(<span class="string">"Gone with the Wind"</span>)</span></span>; <span class="comment">// 默认值为5.0</span></div><div class="line">    Gone.display();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>需要说明的是带默认参数的构造函数，其默认参数必须置于参数列表的结尾。如果例1中带参构造函数 book(char<em> a, double p = 5.0); 被声明成 book(double p = 5.0, char</em> a); 则是无法通过编译的</p>
<h2 id="13-拷贝构造函数"><a href="#13-拷贝构造函数" class="headerlink" title="13. 拷贝构造函数"></a>13. 拷贝构造函数</h2><h2 id="14-析构函数"><a href="#14-析构函数" class="headerlink" title="14. 析构函数"></a>14. 析构函数</h2><p>在创建对象的时候系统会自动调用构造函数，在对象需要被销毁的时候同样系统会自动调用一个函数，这个函数被称之为<code>析构函数</code></p>
<p>析构函数就是用于回收创建对象时所消耗的各种资源</p>
<h3 id="析构函数与普通成员函数相比，有如下特征："><a href="#析构函数与普通成员函数相比，有如下特征：" class="headerlink" title="析构函数与普通成员函数相比，有如下特征："></a>析构函数与普通成员函数相比，有如下特征：</h3><ul>
<li>无返回值</li>
<li>没有参数，不能被重载，因此一个类也只能含有一个析构函数</li>
<li>函数名必须为“~类名”的形式，符号“~”与类名之间可以有空格</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> Array</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        Array()&#123;length = <span class="number">0</span>; num = <span class="literal">NULL</span>;&#125;;</div><div class="line">        Array(<span class="keyword">int</span> * A, <span class="keyword">int</span> n);</div><div class="line">        Array(Array &amp;a);</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setnum</span><span class="params">(<span class="keyword">int</span> value, <span class="keyword">int</span> index)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">int</span> * <span class="title">getaddress</span><span class="params">()</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getlength</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> length;&#125;</div><div class="line">        ~Array();</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">int</span> length;</div><div class="line">        <span class="keyword">int</span> * num;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Array::~Array()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span>(num != <span class="literal">NULL</span>)</div><div class="line">        <span class="keyword">delete</span>[] num;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"destructor"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Array::Array(Array &amp; a)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span>(a.num != <span class="literal">NULL</span>)</div><div class="line">    &#123;</div><div class="line">        length = a.length;</div><div class="line">        num = <span class="keyword">new</span> <span class="keyword">int</span>[length];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;length; i++)</div><div class="line">            num[i] = a.num[i];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">    &#123;</div><div class="line">        length = <span class="number">0</span>;</div><div class="line">        num = <span class="number">0</span>;</div><div class="line">    &#125;  </div><div class="line">&#125;</div><div class="line"></div><div class="line">Array::Array(<span class="keyword">int</span> *A, <span class="keyword">int</span> n)</div><div class="line">&#123;</div><div class="line">    num = <span class="keyword">new</span> <span class="keyword">int</span>[n];</div><div class="line">    length = n;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">        num[i] = A[i];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Array::setnum(<span class="keyword">int</span> value, <span class="keyword">int</span> index)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span>(index &lt; length)</div><div class="line">        num[index] = value;</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"index out of range!"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Array::display()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;length; i++)</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;num[i]&lt;&lt;<span class="string">" "</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">int</span> * Array::getaddress()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> num;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> A[<span class="number">5</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</div><div class="line">    <span class="function">Array <span class="title">arr1</span><span class="params">(A, <span class="number">5</span>)</span></span>;</div><div class="line">    arr1.display();</div><div class="line">    <span class="function">Array <span class="title">arr2</span><span class="params">(arr1)</span></span>;</div><div class="line">    arr2.display();</div><div class="line">    arr2.setnum(<span class="number">8</span>,<span class="number">2</span>);</div><div class="line">    arr1.display();</div><div class="line">    arr2.display();</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;arr1.getaddress()&lt;&lt;<span class="string">" "</span>&lt;&lt;arr2.getaddress()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="析构顺序"><a href="#析构顺序" class="headerlink" title="析构顺序"></a>析构顺序</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> test</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        test(<span class="keyword">int</span> i)</div><div class="line">        &#123;</div><div class="line">            num = i;<span class="built_in">cout</span>&lt;&lt;num&lt;&lt;<span class="string">" Constructor"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">        ~test()</div><div class="line">        &#123;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;num&lt;&lt;<span class="string">" Destructor"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">int</span> num;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">class</span> test2&#123;</div><div class="line">    <span class="keyword">int</span> num;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        test2(<span class="keyword">int</span> i)&#123;</div><div class="line">            <span class="keyword">this</span>-&gt;num = i;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"----init----"</span>&lt;&lt;num&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        ~test2()&#123;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"----out-----"</span>&lt;&lt;num&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">&#125;;    </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function">test <span class="title">t0</span><span class="params">(<span class="number">0</span>)</span></span>;</div><div class="line">    <span class="function">test <span class="title">t1</span><span class="params">(<span class="number">1</span>)</span></span>;</div><div class="line">    <span class="function">test <span class="title">t2</span><span class="params">(<span class="number">2</span>)</span></span>;</div><div class="line">    <span class="function">test2 <span class="title">a</span><span class="params">(<span class="number">11</span>)</span></span>;</div><div class="line">    <span class="function">test2 <span class="title">b</span><span class="params">(<span class="number">22</span>)</span></span>;</div><div class="line">    <span class="function">test <span class="title">t3</span><span class="params">(<span class="number">3</span>)</span></span>;</div><div class="line">    <span class="function">test2 <span class="title">c</span><span class="params">(<span class="number">33</span>)</span></span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不仅是同类型的不同对象，即使是不同类型的不同推向，析构函数的调用顺序与构造函数调用顺序正好是相反的，为了方便记忆，我们可以将之理解为一个栈，先入后出。</p>
<h2 id="13-this指针"><a href="#13-this指针" class="headerlink" title="13. this指针"></a>13. this指针</h2><p>每一个成员函数中都包含一个常量指针，我们称其为this指针，该指针指向调用本函数的对象，其值为该对象的首地址。通过该指针，我们可以在成员函数的函数体内访问对象。其中this是C++的一个关键字。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> book</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        book()</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">this</span>-&gt;price = <span class="number">0.0</span>; <span class="keyword">this</span>-&gt;title = <span class="literal">NULL</span>;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">double</span> price;</div><div class="line">        <span class="keyword">char</span> * title;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setprice</span><span class="params">(<span class="keyword">double</span> price)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">this</span>-&gt;price = price;<span class="comment">// 这种写法要比 price = price强多了</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="14-new、new-、delete、delete"><a href="#14-new、new-、delete、delete" class="headerlink" title="14. new、new[]、delete、delete[]"></a>14. new、new[]、delete、delete[]</h2><p>我们需要为类对象动态分配存储空间时，我们应该使用C++语言提供的new与new[]操作符，而不要使用C语言提供的malloc函数。</p>
<p>虽然malloc函数具有分配存储空间的功能，但是这些函数除了分配存储空间外，不会调用类的构造函数。而C++语言提供的new和new[]操作符则不会如此，使用它们为对象分配存储空间的同时，它们也会调用相应的构造函数。</p>
<p>操作符delete和delete[]在释放对象存储空间的同时也会调用析构函数，而free函数则不会调用析构函数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> test</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        test(<span class="keyword">int</span> i = <span class="number">1</span>)</div><div class="line">        &#123;</div><div class="line">            num = i;<span class="built_in">cout</span>&lt;&lt;num&lt;&lt;<span class="string">" Constructor"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        ~test()</div><div class="line">        &#123;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;num&lt;&lt;<span class="string">" Destructor"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">int</span> num;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    test * t0 = <span class="keyword">new</span> test(<span class="number">0</span>);</div><div class="line">    test * t1 = <span class="keyword">new</span> test[<span class="number">5</span>]; <span class="comment">//创建5个对象，默认值i为1</span></div><div class="line">    test * t2 = (test *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(test));</div><div class="line">    <span class="keyword">delete</span> t0;</div><div class="line">    <span class="keyword">delete</span>[] t1; <span class="comment">// 删除5个对象</span></div><div class="line">    <span class="built_in">free</span>(t2);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="15-static"><a href="#15-static" class="headerlink" title="15. static"></a>15. static</h2><p>有另外一种类型的成员，那就是与static结合的成员变量和成员函数。类中的成员变量或成员函数一旦与static关键字相结合，则该成员变量或成员函数就是属于类的，而不是再是属于任何一个对象的，当然任何一个对象都可以共享该成员变量及成员函数。</p>
<h3 id="静态成员变量"><a href="#静态成员变量" class="headerlink" title="静态成员变量"></a>静态成员变量</h3><p>静态成员变量声明非常简单，只需要将static关键字加在成员变量声明的前面即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> student</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        student()&#123;count ++;&#125;</div><div class="line">        ~student()&#123;count --;&#125;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="comment">// 静态成员变量</span></div><div class="line">        <span class="keyword">static</span> <span class="keyword">int</span> count;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="修改静态成员"><a href="#修改静态成员" class="headerlink" title="修改静态成员"></a>修改静态成员</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> student</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        student()</div><div class="line">        &#123;</div><div class="line">            count ++;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        ~student()</div><div class="line">        &#123;</div><div class="line">            count --;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">static</span> <span class="keyword">int</span> count;</div><div class="line">        <span class="comment">//其它成员变量</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">int</span> student::count = <span class="number">0</span>;</div></pre></td></tr></table></figure>
<p>静态成员变量的定义必须在任何程序块之外；其次调用该变量的时候可以直接用类名加上域解析符“::”加上变量名的形式，这是静态成员变量特有的引用方式；在类外部进行定义的时候static关键字是不需要的。</p>
<p>在C++语法中规定静态成员变量会被默认初始化为0，类外定义可有可无</p>
<p>静态成员变量属于类而不属于任何一个对象</p>
<p>静态成员变量不会影响类及其对象的大小，也即sizeof结果不会受到影响</p>
<p><code>实现数据共享功能</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">class</span> test</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="keyword">static</span> <span class="keyword">int</span> num;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">int</span> test::num = <span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    test one;</div><div class="line">    test two;</div><div class="line">    test three;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;test::num&lt;&lt;<span class="string">" "</span>&lt;&lt;one.num&lt;&lt;<span class="string">" "</span>&lt;&lt;two.num&lt;&lt;<span class="string">" "</span>&lt;&lt;three.num&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    test::num = <span class="number">5</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;test::num&lt;&lt;<span class="string">" "</span>&lt;&lt;one.num&lt;&lt;<span class="string">" "</span>&lt;&lt;two.num&lt;&lt;<span class="string">" "</span>&lt;&lt;three.num&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    one.num = <span class="number">8</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;test::num&lt;&lt;<span class="string">" "</span>&lt;&lt;one.num&lt;&lt;<span class="string">" "</span>&lt;&lt;two.num&lt;&lt;<span class="string">" "</span>&lt;&lt;three.num&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    two.num = <span class="number">4</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;test::num&lt;&lt;<span class="string">" "</span>&lt;&lt;one.num&lt;&lt;<span class="string">" "</span>&lt;&lt;two.num&lt;&lt;<span class="string">" "</span>&lt;&lt;three.num&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    three.num = <span class="number">2</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;test::num&lt;&lt;<span class="string">" "</span>&lt;&lt;one.num&lt;&lt;<span class="string">" "</span>&lt;&lt;two.num&lt;&lt;<span class="string">" "</span>&lt;&lt;three.num&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="静态成员函数"><a href="#静态成员函数" class="headerlink" title="静态成员函数"></a>静态成员函数</h3><p>在类内除了能用static声明静态成员变量外，同样可以使用static声明静态成员函数，静态成员函数只能访问static成员变量。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">class</span> test</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        test(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</div><div class="line">        &#123;</div><div class="line">            num = a; plus = b;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getnum</span><span class="params">()</span></span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> num;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">()</span><span class="comment">//compile error</span></span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> num+plus;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setnum</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;num = a;&#125;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setplus</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;plus = a;&#125;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">static</span> <span class="keyword">int</span> num;</div><div class="line">        <span class="keyword">int</span> plus;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">int</span> test::num = <span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    test one;</div><div class="line">    one.setnum(<span class="number">5</span>);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;test::getnum()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>静态成员函数只能访问静态成员变量，而不能访问非静态成员变量。普通成员函数（包括构造函数和析构函数）既可以访问普通成员变量，同时又可以访问静态成员变量。</p>
<p>由于静态成员变量和静态成员函数都是属于类，而不是属于对象，因此静态成员函数内部也不存在this指针，因为静态成员函数不属于对象</p>
<h2 id="16-友元函数和友元类"><a href="#16-友元函数和友元类" class="headerlink" title="16.友元函数和友元类"></a>16.友元函数和友元类</h2><p>通过friend关键字，我们可以将不属于当前类的一个函数在当前类中加以声明，该函数便可以成为当前类的友元函数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> book</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        book()&#123;&#125;</div><div class="line">        book(<span class="keyword">char</span>* a, <span class="keyword">double</span> p);</div><div class="line">        <span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(book &amp;b)</span></span>;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">double</span> price;</div><div class="line">        <span class="keyword">char</span> * title;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">book::book(<span class="keyword">char</span>* a, <span class="keyword">double</span> p) </div><div class="line">&#123;</div><div class="line">    title = a;</div><div class="line">    price = p;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(book &amp;b)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"The price of "</span>&lt;&lt;b.title&lt;&lt;<span class="string">" is $"</span>&lt;&lt;b.price&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function">book <span class="title">Alice</span><span class="params">(<span class="string">"Alice in Wonderland"</span>,<span class="number">29.9</span>)</span></span>;</div><div class="line">    display(Alice);</div><div class="line">    <span class="function">book <span class="title">Harry</span><span class="params">(<span class="string">"Harry potter"</span>, <span class="number">49.9</span>)</span></span>;</div><div class="line">    display(Harry);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>display是一个顶层函数，在book类中，我们借助friend关键字将其声明为友元函数，结果，在display函数体内，我们就能访问private属性的title和price成员变量。这就是友元函数的作用。友元函数可以访问这个类中的私有成员。如果这个display函数不是book类的友元函数，则在函数体中还必须调用public属性的成员函数。在此例中需要注意的是友元函数的形参是类对象的引用，同时在访问私有成员变量时必须要加上对象名。</p>
<p>除了顶层函数可以被定义为友元函数之外，其它类的成员函数同样可以声明为本类的友元函数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> time;</div><div class="line"></div><div class="line"><span class="keyword">class</span> date</div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        date(<span class="keyword">int</span> y,<span class="keyword">int</span> m,<span class="keyword">int</span> d);</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(time &amp;t)</span></span>;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keyword">int</span> year;</div><div class="line">        <span class="keyword">int</span> month;</div><div class="line">        <span class="keyword">int</span> day;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">class</span> time</div><div class="line">&#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    time(<span class="keyword">int</span> s,<span class="keyword">int</span> m,<span class="keyword">int</span> h);</div><div class="line">    <span class="keyword">friend</span> <span class="keyword">void</span> date::display(time &amp; t);</div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="keyword">int</span> second;</div><div class="line">    <span class="keyword">int</span> minute;</div><div class="line">    <span class="keyword">int</span> hour;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">time::time(<span class="keyword">int</span> s,<span class="keyword">int</span> m,<span class="keyword">int</span> h)</div><div class="line">&#123;</div><div class="line">    second = s;</div><div class="line">    minute = m;</div><div class="line">    hour = h;</div><div class="line">&#125;</div><div class="line"></div><div class="line">date::date(<span class="keyword">int</span> y,<span class="keyword">int</span> m,<span class="keyword">int</span> d)</div><div class="line">&#123;</div><div class="line">    year = y;</div><div class="line">    month = m;</div><div class="line">    day = d;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> date::display(time &amp;t)</div><div class="line">&#123;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"The time is:"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;year&lt;&lt;<span class="string">"/"</span>&lt;&lt;month&lt;&lt;<span class="string">"/"</span>&lt;&lt;day&lt;&lt;<span class="string">" "</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;t.hour&lt;&lt;<span class="string">":"</span>&lt;&lt;t.minute&lt;&lt;<span class="string">":"</span>&lt;&lt;t.second&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function">date <span class="title">d</span><span class="params">(<span class="number">2015</span>,<span class="number">1</span>,<span class="number">16</span>)</span></span>;</div><div class="line">    <span class="function">time <span class="title">t</span><span class="params">(<span class="number">20</span>,<span class="number">2</span>,<span class="number">30</span>)</span></span>;</div><div class="line">    d.display(t);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="17-命名空间"><a href="#17-命名空间" class="headerlink" title="17. 命名空间"></a>17. 命名空间</h2><h3 id="什么是命名空间"><a href="#什么是命名空间" class="headerlink" title="什么是命名空间"></a>什么是命名空间</h3><p>科技发展到如今，一个系统通常都不会仅由一个人来开发完成，不同的人开发同一个系统，不可避免地会出现变量或函数的命名冲突，当所有人的代码测试通过，没有问题时，将所有人的代码结合到一起，因为变量或函数重名而导致的问题将会造成一定的混乱，例如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span>  flag = <span class="number">1</span>;      <span class="comment">//小李声明的变量</span></div><div class="line"><span class="comment">// ……             //中间间隔若干行代码</span></div><div class="line"><span class="keyword">bool</span> flag = <span class="literal">true</span>;   <span class="comment">//小韩声明的变量</span></div></pre></td></tr></table></figure>
<p>因为个人习惯不同，小李喜欢声明int型变量用于逻辑判断，而小韩则更喜欢采用bool类型变量。但两个声明放到同一个函数中的时候，很明显编译器会提示出flag变量重新定义的错误。这种问题若不加以处理是无法编译通过的。</p>
<p>可以使用命名空间解决类似上面的命名冲突问题，例如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> Li&#123;   <span class="comment">//小李的变量声明</span></div><div class="line">    <span class="keyword">int</span> flag = <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">namespace</span> Han&#123;   <span class="comment">//小韩的变量声明</span></div><div class="line">    <span class="keyword">bool</span> flag = <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>小李与小韩各自定义了以自己姓氏为名的命名空间，此时将小李与小韩的flag变量定义再置于同一个函数体中，则不会有任何问题，当然在使用这两个变量的时候需要指明所采用的是哪一个命名空间中的flag变量</p>
<h3 id="使用某个命名空间"><a href="#使用某个命名空间" class="headerlink" title="使用某个命名空间"></a>使用某个命名空间</h3><p>指定所使用的变量时需要用到“::”操作符，“::”操作符是域解析操作符。例如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Li::flag = <span class="number">0</span>;        <span class="comment">//使用小李定义的变量flag</span></div><div class="line">Han::flag = <span class="literal">false</span>;   <span class="comment">//使用小韩定义的变量flag</span></div></pre></td></tr></table></figure>
<p>除了直接使用域解析操作符，还可以采用using声明（using declaration），例如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> Li::flag;</div><div class="line">flag = <span class="number">0</span>;  <span class="comment">//使用小李定义的变量flag</span></div><div class="line">Han::flag = <span class="literal">false</span>;  <span class="comment">//使用小韩定义的变量flag</span></div></pre></td></tr></table></figure>
<p>在代码的开头用using声明了Li::flag，其含义是using声明以后的程序中如果出现未指明的flag时，则使用Li::flag，但是若要使用小韩定义的flag，则仍需要Han::flag。</p>
<p>using声明不仅仅可以针对命名空间中的一个变量，也可以用于声明整个命名空间，例如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> Li;</div><div class="line">flag = <span class="number">0</span>;     <span class="comment">//使用小李定义的变量flag</span></div><div class="line">Han::flag = <span class="literal">false</span>;   <span class="comment">//使用小韩定义的变量flag</span></div></pre></td></tr></table></figure>
<p>命名空间内部不仅可以声明或定义变量，对于其它能在命名空间以外声明或定义的实体，同样也都能在命名空间内部进行声明或定义，例如变量的声明或定义、函数的声明或定义、typedef等都可以出现在命名空间中。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"hello world!"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这是一个简单的C++程序hello world示例，在程序中采用了using声明命名空间std，using namespace std; 这一语句涵盖了std命名空间中的所有标识符，而该命名空间包含C++所有标准库。头文件iostream文件中定义的所有变量、函数等都位于std命名空间中，每次使用iostream中的变量或函数都需要在前面加上std::是非常麻烦的一件事，为此可直接用using声明将std中的所有变量或函数等都声明出来。</p>
<p>如果不用using namespace std;这一语句，则程序应该像下面这样：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span>&lt;&lt;<span class="string">"hello world!"</span>&lt;&lt;<span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          </section>
        </article>
        

       
        <div class="pager">
          
          
            <a class="post-next pager-item" href="/2017/03/08/06-mac下vim配置/">
              <strong class="article-nav-caption">下一篇</strong>
              <p class="post-nav-title">mac下vim配置</p>
            </a>
          
        </div>
        

         <!-- comments -->
        <div class="comment-section">
  
    


</div>

    </div>
    
    <aside>
        <div id="toc">
        </div>
    </aside>
    
</div>

                </div>
            </div>
        </div>
        <footer class="footer">
    <p>由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动，搭载<a href="https://github.com/wayou/hexo-theme-gstyle">gstyle</a>主题</p>
    <p>
        &copy; 2017 dongGe
    </p>
    
  

  

  
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261300516'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/stat.php%3Fid%3D1261300516' type='text/javascript'%3E%3C/script%3E"));</script>
  
</footer>
<script src="/lib/jquery.js"></script>
<script src="/lib/waves.js"></script>
<script src="/lib/jquery-ui.js"></script>
<script src="/lib/jquery.tocify.js"></script>
<script src="/js/main.js"></script>


    </body>
</html>
